<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Basic page metadata -->
  <meta charset="UTF-8">
  <title>Local Search</title>

  <style>

    /* Global page styling */
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background-color: #0f172a;
      color: #e5e7eb;
      margin: 0;
      padding: 0;
    }

    /* Main layout wrapper (sidebar + results) */
    .page-wrapper {
      display: flex;
      max-width: 1200px;
      margin: 3rem auto;
      gap: 2rem;
      padding: 0 1rem;
    }

    /* Sidebar filter section */
    .filters {
      width: 260px;
      background-color: #111827;
      padding: 1.5rem;
      border-radius: 12px;
      height: fit-content;
    }

    .filters h2 {
      margin-top: 0;
    }

    .filters label {
      display: block;
      margin: 0.6rem 0;
      font-size: 0.9rem;
    }

    .filters button {
      width: 100%;
      margin-top: 0.8rem;
      padding: 0.6rem;
      border-radius: 8px;
      border: none;
      background-color: #6366f1;
      color: white;
      font-weight: 600;
      cursor: pointer;
    }

    .filters button:hover {
      background-color: #4f46e5;
    }

    /* Results section */
    .results-area {
      flex: 1;
      background-color: #111827;
      padding: 2rem;
      border-radius: 12px;
    }

    /* Top navigation buttons */
    .nav-buttons {
      margin-bottom: 1rem;
    }

    .nav-buttons a {
      text-decoration: none;
      color: #6366f1;
      font-weight: 600;
      margin-right: 1rem;
    }

    /* Search form styling */
    .search-form label {
      display: block;
      margin-top: 1rem;
      font-weight: 600;
    }

    input[type="text"] {
      width: 100%;
      padding: 0.6rem;
      border-radius: 8px;
      border: none;
      background-color: #1f2933;
      color: #e5e7eb;
    }

    input[type="radio"] {
      margin-right: 0.4rem;
    }

    .search-form button {
      margin-top: 1rem;
      padding: 0.6rem 1rem;
      border-radius: 8px;
      border: none;
      background-color: #6366f1;
      color: white;
      font-weight: 600;
      cursor: pointer;
    }

    .search-form button:hover {
      background-color: #4f46e5;
    }

    /* Book result card layout */
    .book-card {
      display: flex;
      background-color: #1f2933;
      margin-top: 1.5rem;
      padding: 1rem;
      border-radius: 10px;
      gap: 1rem;
      align-items: flex-start;
    }

    /* Placeholder cover block */
    .book-cover {
      width: 120px;
      height: 170px;
      background-color: #374151;
      border-radius: 6px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.8rem;
      color: #9ca3af;
    }

    /* Book info text */
    .book-info h3 {
      margin: 0 0 0.5rem 0;
    }

    .book-info p {
      margin: 0.3rem 0;
      font-size: 0.9rem;
    }

    /* Tag badges */
    .tags {
      margin-top: 0.6rem;
    }

    .tags span {
      background-color: #374151;
      padding: 0.3rem 0.6rem;
      border-radius: 6px;
      font-size: 0.75rem;
      margin-right: 0.4rem;
    }

    /* Button inside card */
    .view-button {
      display: inline-block;
      margin-top: 0.8rem;
      text-decoration: none;
      background-color: #6366f1;
      padding: 0.5rem 0.8rem;
      border-radius: 8px;
      color: white;
      font-size: 0.85rem;
    }

    .view-button:hover {
      background-color: #4f46e5;
    }

    /* No results message */
    .no-results {
      margin-top: 2rem;
      text-align: center;
      font-weight: 600;
      color: #9fbaff;
    }

  </style>
</head>

<body>

  <div class="page-wrapper">

    <!-- Sidebar filters -->
    <aside class="filters">
      <h2>Filter by Tag</h2>

      <label><input type="checkbox"> Owned</label>
      <label><input type="checkbox"> Favorite</label>
      <label><input type="checkbox"> Read</label>
      <label><input type="checkbox"> Currently Reading</label>

      <button>Apply Filters</button>

      <button onclick="window.location.href='/local-search'">
        View All Books
      </button>
    </aside>

    <!-- Main results area -->
    <section class="results-area">

      <!-- Navigation links -->
      <div class="nav-buttons">
        <a href="/dashboard">‚Üê Back</a>
        <a href="/">üè† Home</a>
      </div>

      <h1>Local Search</h1>

      <!-- Search form -->
      <form method="GET" action="/local-search" class="search-form">

        <label for="search">Search</label>
        <input type="text" id="search" name="search"
          value="{{ request.args.get('search', '') }}">

        <label><input type="radio" name="search_type" value="isbn"> ISBN</label>
        <label><input type="radio" name="search_type" value="title" checked> Book Title</label>
        <label><input type="radio" name="search_type" value="author"> Author</label>

        <button type="submit">Search</button>
      </form>

      <!-- Results loop -->
      {% if books %}
        {% for book in books %}
          <div class="book-card">

            <div class="book-cover">
              No Cover
            </div>

            <div class="book-info">
              <h3>{{ book[1] }}</h3>
              <p><strong>Author:</strong> {{ book[4] }}</p>
              <p><strong>Publisher:</strong> {{ book[5] }}</p>
              <p><strong>Publish Year:</strong> {{ book[2] }}</p>
              <p><strong>ISBN:</strong> {{ book[0] }}</p>

              <div class="tags">
                <span>Owned</span>
                <span>Favorite</span>
                <span>Read</span>
              </div>

              <a href="/book/{{ book[0] }}" class="view-button">
                Go to Book Page ‚Üí
              </a>
            </div>

          </div>
        {% endfor %}

      {% elif request.args.get('search') %}
        <p class="no-results">No books found.</p>
      {% endif %}

    </section>

  </div>

</body>
</html>
