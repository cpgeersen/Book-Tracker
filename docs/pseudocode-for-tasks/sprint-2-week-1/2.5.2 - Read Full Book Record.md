# 2.5.2 - Read Full Book Record

Note: You could implement the functions with complex queries or use existing read functions
to compose a JSON result from multiple function calls. The pseudocode will be written with the
latter option.

Note: Pseudocode and variable/function names are only for guidance. The only things that are a must 
are the inputs and outputs of the functions.

JSON Schema that all resulting functions that return the whole record must have:
Note: Sample data is included
```JSON
{"ISBN": "user_provided_isbn",
 "title": "SomeBook",
 "publish_date": "2026",
 "publisher_id": "3",
 "summary": "asdfdasadfsdfsafds",
 "tag_id": "4",
 "chapters": "23",
 "chapters_completed": "3",
 "cover_image_bytes": "",
 "AuthorID_1": "1",
 "Author_First_Name_1": "John",
 "Author_Last_Name_1": "Doe",
 "AuthorID_2": "4",
 "Author_First_Name_2": "Jane",
 "Author_Last_Name_3": "Doe",
 "Publisher_Name": "SomePublisher",
 "Owned": "yes",
 "Favorite": "yes",
 "Completed": "no",
 "Currently_Reading": "yes",
 "PersonalOrAcademic": "personal",
 "GenreID_1": "1",
 "Genre_1": "fiction",
 "GenreID_2": "3",
 "Genre_2": "fantasy",
 "GenreID_3": "6",
 "Genre_3": "humor",
 "GenreID_4": "4",
 "Genre_4": "drama"}
```

These functions will need to either use existing, reworked, or new query functions to construct.
The following functions are needed:
- read_book_table(isbn) -> JSON
  - Return JSON Schema:
    ````JSON
    {"ISBN": "user_provided_isbn",
    "title": "SomeBook",
    "publish_date": "2026",
    "publisher_id": "3",
    "summary": "asdfdasadfsdfsafds",
    "tag_id": "4",
    "chapters": "23",
    "chapters_completed": "3",
    "cover_image_bytes": ""}
    ````
- read_author_id(isbn) -> JSON
  - Return JSON Schema:
    ````JSON
        {"AuthorIDs": ["1", "4"]}
    ````
- read_author_name(author_ids_for_book) -> JSON
  - Return JSON Schema:
    ````JSON
        {"1": ["John", "Doe"],"4": ["Jane", "Doe"]}
    ````
- read_publisher_name(publisher_id) -> JSON
  - Return JSON Schema:
    ````JSON
        {"PublisherID": "Publisher_Name"}
    ````
- read_tag_table(tag_id) -> JSON
  - Return JSON Schema:
    ````JSON
        {"Owned": "yes",
         "Favorite": "yes",
         "Completed": "no",
         "Currently_Reading": "yes",
         "PersonalOrAcademic": "personal"}
    ````
- read_genre_ids(isbn) -> JSON
  - Return JSON Schema:
    ````JSON
        {"GenreIDs": ["1", "3", "6", "4"]}
    ````
- read_genres(genre_ids) -> JSON
  - Return JSON Schema:
    ````JSON
        {"1": "fiction", 
         "3": "fantasy",
         "6": "humor",
         "4": "drama"}
    ````

    
### 2.5.2.1 - Read Book Record Based on ISBN (i.e. returning all entries).



````
# Function that takes isbn and returns records matching the isbn from tables:
# book, author, publisher, tag, genre, and notes
# This is the biggest function, pretty much all other functions can call this

read_all_book_data(isbn): -> JSON

    # First read book table information from ISBN and add to json_result
    json_result += read_book_table(isbn) # function call returns JSON and append it here
    print(json_result) # Should return: {'isbn': 'user_provided_isbn',
                                         'title': 'SomeBook',
                                         'publish_date': '2026',
                                         'publisher_id': '3',
                                         'summary': 'asdfdasadfsdfsafds',
                                         'tag_id': '4',
                                         'chapters': '23',
                                         'chapters_completed': '3',
                                         'cover_image_bytes': ''} # this can be junk data for now

    
    # Next use ISBN to read BookAuthor table and get AuthorIDs associated with ISBN
    author_ids_for_book = read_author_id(isbn) -> JSON
    print(author_ids_for_book) # Should return: {'AuthorIDs': ['1']} or
                               #                {'AuthorIDs': ['1', '4']}
                               # 1 and 4 refer to example AuthorIDs
    
    # Next using AuthorIDs, get the author first and last names
    author_names = read_author_name(author_ids_for_book) -> JSON
    print(author_names) # Should return: {'1': ['John', 'Doe']}
                        #                                    or
                        #                {'1': ['John', 'Doe'],
                        #                 '4': ['Jane', 'Doe']}
                        # 1 and 4 in this case are example AuthorIDs
    
    # Add AuthorIDs and AuthorNames to json_result
    IF len(author_names) > 2:
        raise ERROR
    ELSE:
        author_number = 1
        FOR key, value in author_names:
            json_result[f'AuthorID_{author_number}'] = key
            json_result[f'Author_First_Name_{author_number}'] = value[0]
            json_result[f'Author_Last_Name_{author_number}'] = value[1]
            author_number += 1
            
    
    # Next use Publishers table with PublisherID to get Publisher_Name
    publisher_name_for_book = read_publisher_name(publisher_id) -> JSON
    print(publisher_name_for_book) # Should return: {'PublisherID': 'Publisher_Name'}
    
    # Directly add the Publisher Name as a new key-value pair to json_result with Publisher Name
    json_result['Publisher_Name'] = publisher_name_for_book['PublisherID']
    
    # Next get Tag information from Tag Table using TagID
    tag_values = read_tag_table(tag_id) -> JSON
    print(tag_values) # Should return: {'Owned': 'yes',
                      #                 'Favorite': 'yes',
                      #                 'Completed': 'no',
                      #                 'Currently_Reading': 'yes',
                      #                 'PersonalOrAcademic': 'personal'}
    # Add Tags to json_result
    FOR key, value in tag_values:
        json_result[key] = value
    
    # Next get GenreID using ISBN from BookGenre Table
    genre_ids = read_genre_ids(isbn) -> JSON
    # Books must have atleast one genre (fiction or nonfiction), up to 3 additional genres
    print(genre_ids) # Should return: {'GenreIDs': ['1', '3', '6', '4']} # Example GenreIDs
    
    # Now get the genres based on the genre_ids
    genres_book_has = read_genres(genre_ids) -> JSON
    print(genres_book_has) # Should return: {'1': 'fiction',
                           #                 '3': 'fantasy',
                           #                 '6': 'humor',
                           #                 '4': 'drama'}
                           # Do not reflect actual ids from genre, only an example
    
    # Now add the genre_ids and genres to json_result
    genre_number = 1
    FOR key, value in genre_ids:
        json_result[f'GenreID_{genre_number}'] = key
        json_result[f'Genre_{genre_number}'] = value
        genre_number += 1
    
    # Was going to add Notes to this function, but that will not be included in this one
    # it will put in a separate function later
    
    # Resulting JSON should look like this:
    print(json_result) # Should return: {'isbn': 'user_provided_isbn',
                                         'title': 'SomeBook',
                                         'publish_date': '2026',
                                         'publisher_id': '3',
                                         'summary': 'asdfdasadfsdfsafds',
                                         'tag_id': '4',
                                         'chapters': '23',
                                         'chapters_completed': '3',
                                         'cover_image_bytes': '', # this can be junk data for now
                                         'AuthorID_1': '1',
                                         'Author_First_Name_1': 'John',
                                         'Author_Last_Name_1': 'Doe',
                                         'AuthorID_2': '4',
                                         'Author_First_Name_2': 'Jane'
                                         'Author_Last_Name_3': 'Doe'
                                         'Publisher_Name': 'SomePublisher',
                                         'Owned': 'yes',
                                         'Favorite': 'yes',
                                         'Completed': 'no',
                                         'Currently_Reading': 'yes',
                                         'PersonalOrAcademic': 'personal',
                                         'GenreID_1': '1',
                                         'Genre_1': 'fiction',
                                         'GenreID_2': '3',
                                         'Genre_2': 'fantasy',
                                         'GenreID_3': '6',
                                         'Genre_3': 'humor',
                                         'GenreID_4': '4',
                                         'Genre_4': 'drama'
                                        }
    return json_result
````

### 2.5.2.2 - Read Book Record(s) Based on Title (i.e. return all entries).

````
read_all_book_data_by_title(title): -> JSON
    # First block searchs with only words like 'the'
    # We can work on the BLOCK_LIST later
    BLOCK_LIST = ['the', 'a', 'be', 'that']
    IF title.lower().strip() in BLOCK_LIST:
        Decline search
    
    # Query Book table for matches
    isbn_results = {Query that searchs book titles based on given user title and returns ISBNs in JSON}

    FOR result in isbn_results: 
        read_all_book_data(isbn) -> JSON
    return all results as JSON to caller
````

### 2.5.2.3 - Read Book Record(s) Based on Author (i.e. return all entries).

````
read_all_book_data_by_author(author): -> JSON
    # WIP

````

### 2.5.2.4 - Read Book Record(s) Based on Genre (i.e. return all entries).

````
read_all_book_data_by_genre(genre): -> JSON
    # WIP
    
````

### 2.5.2.5 - Read Book Record(s) Based on Tags (i.e. return all entries).

````
read_all_book_data_by_tag(tag): -> JSON
    match:
        case 'owned': return_all_by_tag_owned()
        case 'favorite': return_all_by_tag_favorite()
        case 'currently_reading': return_all_by_tag_currently_reading()
        case 'read': return_all_by__tag_read()  
        case _: ERROR
    
    # WIP

````

